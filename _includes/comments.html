{% if site.data.comments[page.slug] %}
<div class="card">
  <div class="card-header">
    Comments <span class="badge badge-secondary">{{ site.data.comments[page.slug] | size }}</span>
  </div>
  {% assign comments = site.data.comments[page.slug] | sort %}

    <ul class="list-group list-group-flush">
  {% for comment in comments %}
    <li class="list-group-item">
        <div>
          {% if comment[1].url %}
          <em><a href="{{ comment[1].url }}" target="_blank">{{ comment[1].name }}</a></em>
          {% else %}
          <em>{{ comment[1].name }}</em>
          {% endif %}
          â€¢ <small>{{ comment[1].date | date: "%Y-%m-%d" }}</small>
        </div>
        <div>
          <blockquote class="blockquote">
            <p class="mb-0">{{ comment[1].message | markdownify }}</p>
          </blockquote>
        </div>
      </li>
  {% endfor %}
    </ul>
</div>
{% endif %}

<div class="card">
  <div class="card-header">
    <h4 class="card-title">Leave a Reply</h4>
    <h6 class="card-subtitle mb-2 text-muted">Your email address will not be published</h6>
  </div>
  <div class="card-body">
    <form method="POST" action="https://api.staticman.net/v2/entry/MaxUlysse/maxulysse.github.io/master/comments">
      <input name="options[redirect]" type="hidden" value="{{ page.url | prepend: site.url }}">
      <input name="options[redirectError]" type="hidden" value="{{ page.url | prepend: site.url }}">
      <input name="options[slug]" type="hidden" value="{{ page.slug }}">
      <div class="form-group row">
        <label for="comment" class="col-sm-2 col-form-label">Comment:</label>
        <div class="col-sm-10">
          <textarea class="form-control" name="fields[message]" rows="3"></textarea>
        </div>
      </div>
      <div class="form-group row">
        <label for="author" class="col-sm-2 col-form-label">Name: <span class="required">*</span></label>
        <div class="col-sm-10">
          <input name="fields[name]" type="text" class="form-control" id="author" placeholder="Enter name">
        </div>
      </div>
      <div class="form-group row">
        <label for="email" class="col-sm-2 col-form-label">Email address: <span class="required">*</span></label>
        <div class="col-sm-10">
          <input id="email" name="fields[email]" type="email" class="form-control" aria-describedby="email-notes" placeholder="Enter email">
        </div>
      </div>
      <div class="form-group row">
        <label for="url" class="col-sm-2 col-form-label">Website:</label>
        <div class="col-sm-10">
          <input name="fields[url]" type="text" class="form-control" id="url" placeholder="Enter url">
        </div>
      </div>
      <button class="btn btn-outline-primary" type="submit">Comment <span class="fa fa-comment" aria-hidden="true"></span></button>
    </form>
  </div>
  <div class="card-footer">
    <small class="text-muted"><i class="fa fa-comments fa-1x" aria-hidden="true"></i> powered by <a href="https://staticman.net/" target="_blank">staticman</a></small>
  </div>
</div>
